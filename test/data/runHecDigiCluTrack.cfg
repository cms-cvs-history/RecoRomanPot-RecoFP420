process DigFP420Test = {
 ####### include services


   service = SimpleMemoryCheck{
             untracked int32 ignoreTotal = 1 
             untracked bool oncePerEventMode = true
   }
  
   include "FWCore/MessageLogger/data/MessageLogger.cfi" 

   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   include "Configuration/StandardSequences/data/SimulationRandomNumberGeneratorSeeds.cff"


        untracked PSet maxEvents = {untracked int32 input = 100}
############################################################
#The module which read from a Ntpl file
	source = PoolSource {
        	untracked vstring fileNames = {"file:Exhume_Hbb.root"}
	}
###############################################
#
# Seeds start
        # Vtx Smearing
#include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
#include "Configuration/StandardSequences/data/VtxSmearedNoSmear.cff"
#include "Configuration/StandardSequences/data/VtxSmearedFlat.cff"
#include "Configuration/StandardSequences/data/VtxSmearedBeamProfile.cff"
###############################################
#



# Initialize geometry with XML files:
	#Geometry
        include "RecoRomanPot/RecoFP420/test/data/Test1GeometryXML.cfi"

# Initialize magnetic field: 
	#Magnetic Field
#	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
# You can set Mag Field to 0
#
#include "Configuration/StandardSequences/data/UseZeroBField.cff"
###############################################   
   include "SimTransport/HectorProducer/data/HectorTransport.cfi"
###############################################   



# Seeds end
#


  include "SimGeneral/MixingModule/data/mixNoPU.cfi"
  include "SimRomanPot/SimFP420/data/FP420Digi.cfi"
  # replace FP420Digi.VerbosityLevel = 1
  # replace FP420Digi.ApplyTofCut = false
  include "RecoRomanPot/RecoFP420/data/FP420Cluster.cfi"
  include "RecoRomanPot/RecoFP420/data/FP420Track.cfi"
  include "RecoRomanPot/RecoFP420/data/FP420Reco.cfi"
#
###############################################   
# Event output
include "Configuration/EventContent/data/EventContent.cff"
#  module o1 = PoolOutputModule {untracked string fileName ="HecEDDEEvent.root"} 
         module o1 = PoolOutputModule {
#                                       untracked string fileName = "HecEDDEEvent.root"
                                       untracked string fileName = "HecExhume_Hbb.root"
          untracked vstring outputCommands = {
              "drop *",
              "keep edmHepMCProduct_*_*_*",
              "keep SimTracks_*_*_*",
              "keep SimVertexs_*_*_*",
            #  "keep PSimHitCrossingFrame_mix_FP420SI_*",
              "keep PSimHits_*_FP420SI_*",
              "keep DigiCollectionFP420_*_*_*",
              "keep ClusterCollectionFP420_*_*_*",
              "keep TrackCollectionFP420_*_*_*",
              "keep RecoCollectionFP420_*_*_*"
          }
     }
#                                        $PWD/
#       include "SimG4Core/Application/data/g4SimHits.cfi"
#        include "SimRomanPot/SimFP420/test/data/SimG4Object.cfi"
#        include "SimTransport/Hector/test/g4SimHits.cfi"
       include "SimG4Core/Application/data/g4SimHits.cfi"

###############################################   
         replace g4SimHits.UseMagneticField = false
#         replace g4SimHits.Physics.DefaultCutValue = 1000.
#          replace g4SimHits.Generator.ApplyPtCuts =  false
          replace g4SimHits.Generator.ApplyPhiCuts =  true
          replace g4SimHits.Generator.ApplyEtaCuts =  false
          replace g4SimHits.Generator.HepMCProductLabel = "LHCTransport"
###############################################   



   path p1 = {  VtxSmeared, LHCTransport, g4SimHits, mix, FP420Digi, FP420Cluster, FP420Track, FP420Reco }

  schedule = {p1, outpath}
 
	endpath outpath = { o1 }

	service = Timing {}
	service = Tracer {}
}		
###############################################
